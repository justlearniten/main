function userSelectionChanged(){selectionEndTimeout&&clearTimeout(selectionEndTimeout);selectionEndTimeout=setTimeout(function(){$(window).trigger("selectionEnd")},500)}function getSelectionText(){var n="";return window.getSelection?n=window.getSelection().toString():document.selection&&document.selection.type!="Control"&&(n=document.selection.createRange().text),n}function repositionAnchor(){if(window.getSelection&&(sel=window.getSelection(),sel.rangeCount)){range=sel.getRangeAt(0).cloneRange();var n=document.getElementById("anchor"),t=n.parentNode;t.removeChild(n);t.normalize();range.insertNode(n)}}$(document).on("click",".panel-heading span.clickable",function(){var n=$(this);n.hasClass("panel-collapsed")?(n.parents(".panel").find(".panel-body").slideDown(),n.removeClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(n.parents(".panel").find(".panel-body").slideUp(),n.addClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))});var selectionEndTimeout=null;document.onselectionchange=userSelectionChanged;$(window).bind("selectionEnd",function(){selectionEndTimeout=null;document.onselectionchange=undefined;var n=getSelectionText();repositionAnchor();showTranslation(n);document.onselectionchange=userSelectionChanged});