function userSelectionChanged(){selectionEndTimeout&&clearTimeout(selectionEndTimeout);selectionEndTimeout=setTimeout(function(){$(window).trigger("selectionEnd")},500)}function getSelectionText(){var n="";return window.getSelection?n=window.getSelection().toString():document.selection&&document.selection.type!="Control"&&(n=document.selection.createRange().text),n}function repositionAnchor(){var n,t;window.getSelection&&(sel=window.getSelection(),sel.rangeCount&&(range=sel.getRangeAt(0).cloneRange(),n=document.getElementById("anchor"),n&&(t=n.parentNode,t.removeChild(n),t.normalize(),range.insertNode(n))))}function onBodyLoad(){resizeMain()}function onBodyResize(){resizeMain()}function resizeMain(){var t=$(window).height(),i=t-80,n=$("#full_height");n&&n.height(i)}function trainerChange(n){for(var i=n.value,r,u,t;n&&n.getAttribute("class").indexOf("trainer-car")<0;)n=n.parentElement;r=n.getAttribute("answers");console.log(r);r&&(i=i.trim().toLowerCase().replace(/\s\s+/g," "),i=i+"%$",u=r.indexOf(i)>=0,t=n.getAttribute("class"),t=t.replace("incorrect","").replace("correct",""),t=t+" "+(u?"correct":"incorrect"),n.setAttribute("class",t))}$(document).on("click",".panel-heading span.clickable",function(){var n=$(this);n.hasClass("panel-collapsed")?(n.parents(".panel").find(".panel-body").slideDown(),n.removeClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(n.parents(".panel").find(".panel-body").slideUp(),n.addClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))});var selectionEndTimeout=null;document.onselectionchange=userSelectionChanged;$(window).bind("selectionEnd",function(){selectionEndTimeout=null;document.onselectionchange=undefined;var n=getSelectionText();repositionAnchor();showTranslation(n);document.onselectionchange=userSelectionChanged});